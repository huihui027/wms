# wms
开源Java仓库管理系统

架构很简单,没有最新最热的技术,框架.
追求低成本,开发部署维护方便,基本功能齐全,适用小公司.

目标是支持日均10万单量. 在低成本同时,有一定水平扩展能力.
会分享些linux半自动脚本,好用的工具,如多机搜索日志,几台机器集群,运维不会太难过.

做些简单的设计,如:
尽量把硬件资源消耗大的功能和仓库作业功能分开.
报文接收,报文发送,定时任务做成单独运行工程, 报表,导出等功能做成队列任务式.
不出现被用户频繁点击导出,创建报表就弄挂系统这种被鄙视的事情.
在促销日,白天作业可以关闭报文,定时任务,报表,导出等功能,只运行主工程.
数据库主键用雪花算法或UUID之类,每表必有创建,更新人,时间字段方便数据迁移.

业务代码先查询,处理,最后统一执行更新,绝对禁止长事务.
若有复杂业务,要有长粗事务,可使用二阶,三阶提交拆分化解为短小事务.
避免出现死锁这么无奈的事情.

总而言之,没有架构,注重细节.
有时list遍历方式不对,就能产生成千上万倍的性能差别.


下面是简单介绍各工程作用.

wms-parent
  父工程:<packing>pom<packing>
	作用:聚合子工程,统一声明jar依赖和构建

wms-base
  基础工程:<packing>jar<packing>
	作用:工具类,实体类,配置文件,redis缓存能力,http封装能力,db实现支持 等   
  
wms-api
  接口工程:<packing>war<packing>
	作用:实现客户对接管理,界面化管理每个客户接口地址,加密参数,接口类型,版本等,使用swagger提供接口文档
	将不同客户的不同类型接口报文,转换成标准报文格式,再转发给wms-main工程,其他如打日志,报文持久化,报文搜索等等
			  	
wms-task
  任务工程:<packing>war<packing>
	作用:定时任务,常用于报表,定时发送数据等
	使用quartz框架,支持quartz集群,持久化,界面化动态管理任务

wms-main
  主工程:<packing>war<packing>
	作用:系统管理,用户管理,客户管理,权限管理,采购单管理,订单管理,作业....所有功能
	如何协调其他工程,细节再说.
  
wms-send
  推送工程:<packing>war<packing>
	作用:回传报文到客户系统,推送数据到其他内部系统等,如有些公司必须把已出库的订单推到金蝶财务系统
	主工程在业务节点产生报文,保存到数据库,推送工程从数据库取出报文,推送,并处理结果.
  
以下是介绍技术选型

项目管理:maven

代码管理:git

缓存：Redis

消息中间件：ActiveMQ

负载均衡：Nginx

数据库连接池：Alibaba Druid 1.0

核心框架：Spring framework

视图框架：Spring MVC 4.0

任务调度：quartz

持久层框架：MyBatis 3.2

日志管理：SLF4J 1.7、Log4j

API网关:Kong

其中: 
quartz:(实现集群,持久化,界面化动态管理)

redis 用于缓存基础数据,会话; 会话是自己做的session, 使用cookie+ 缓存替代 HttpSession

mybatis 结合代码生成工具,分页插件
代码生成工具可以生成entity,mapper,service,controller, 还有仿hibernate的criteria, 单表操作完全不用写sql.
分页插件是一个真正的分页插件, 跟网上很多共享的把原sql包一层 select count(*) from ( 原查询sql ) 这种没用的插件不一样.

框架还有其他方面的处理,如使用全局trim参数,aop 处理异常,日志,统一消息封装,前端框架表格,弹窗,form提交等都是经过封装改造. 架构能统一处理的地方,基本处理了.


//编码约定 //缓存方案 //事务控制 //异常处理 //部署方案 ..... 

目前开发团队有3个人, 老腊肉我, 小美女丽丽,小鲜肉启贵.
我们有几年WMS开发经验,抱着尝试的态度,做这个开源项目,做的不好,求轻喷. 
我们都有稳定工作,所以进度肯定也很慢.准备有空就写,很可能1个月才提交几行代码.
等功能做到差不多了,才会建群. 大概是几年之后了. 
